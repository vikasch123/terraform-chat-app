# Ansible inventory file auto-generated by Terraform
# This file is generated dynamically based on EC2 instance outputs

# Web group - Nginx server with public IP access
[web]
nginx ansible_host=${web_public_ip}
       ansible_user=ec2-user
       ansible_ssh_private_key_file=${web_key_path}

# App group - Django application server (accessed via SSH proxy through web server)
[app]
django-app ansible_host=${app_private_ip}
           ansible_user=ec2-user
           ansible_ssh_private_key_file=${app_key_path}
           ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -o StrictHostKeyChecking=no -i ${web_key_path} ec2-user@${web_public_ip}"'

# DB group - MySQL database server (accessed via SSH proxy through web server)
[db]
mysql-db ansible_host=${db_private_ip}
         ansible_user=ec2-user
         ansible_ssh_private_key_file=${db_key_path}
         ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -o StrictHostKeyChecking=no -i ${web_key_path} ec2-user@${web_public_ip}"'

# All hosts group
[all:children]
web
app
db

# Variables for all groups
[all:vars]
ansible_python_interpreter=/usr/bin/python3


